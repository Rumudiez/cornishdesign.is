---
layout: default
---

<article>
  <aside class="col-1">
    <div class="portrait-placeholder"></div>
    <ul class="contact">
      <li class="name"></li>
    </ul>
  </aside>
  <div class="col-2">
    <p class="statement"></p>
  </div>
</article>

<script src="{{ site.baseurl }}js/tabletop.js"></script>
<script>
  /* File definitions for patterns */
  var patternDir = {
    "All Falls Down":  "assets/patterns/All_Falls_Down/allFallsDown-",
    "Modern Lumber":   "assets/patterns/Modern_Lumber/modernLumber-",
    "Pixelated Heart": "assets/patterns/Pixelated_Heart/pixelatedHeart-",
    "Space Invaders":  "assets/patterns/Space_Invaders/spaceInvaders-",
    "The Notebook":    "assets/patterns/The_Notebook/theNotebook-",
    "The Ziggy":       "assets/patterns/The_Ziggy/theZiggy-"
  }, colorNames = {
    "#FFDC00": "Yellow1",
    "#FFF128": "Yellow2",
    "#9C006F": "Purple1",
    "#BB3181": "Purple2",
    "#E01A21": "Orange1",
    "#EF5A3F": "Orange2",
    "#99C93B": "Green1",
    "#C6DA5C": "Green2",
    "#140857": "Blurple1",
    "#3D377A": "Blurple2",
    "#81C99B": "Aqua1",
    "#B2DBBF": "Aqua2",
    "#FFE2A4": "Cream1",
    "#FFEDC4": "Cream2",
    "#008789": "Teal1",
    "#0099A4": "Teal2",
    "#231F20": "Black1"
  }

  /* Fetch name parameter from the URL */
  function getURLParameter(name) {
    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
  }
  var name = getURLParameter("name");

  /* After loading, use Tabletop.js to fetch profile/project information then populate the HTML template with it */
  window.onload = function() { init() };
  function init() {
    Tabletop.init( { key: "1CvMr7Scpa4v38EAWSOwqPbs1hpcNCNvZ395jfRXOkCM",
                     callback: renderContent,
                     simpleSheet: true,
                     orderby: "name",
                     reverse: true } );
  }

  function renderContent(data) {
    /* Find specific profile within the Spreadsheet according to name */
    function getObject(property, value) {
      for (i=0; i<data.length; i++) {
        if (data[i][property] == value) return data[i];
      }
    }
    var profile = getObject("Your Name", name);
    var contact = document.getElementsByClassName("contact")[0];
    console.log(profile);

    /* Populate HTML with certain mandatory Spreadsheet entries */
    document.getElementById("pagesubtitle").innerHTML    = profile["Your Degree"];
    document.getElementById("pagetitle").innerHTML       = profile["Your Name"];
    document.getElementsByClassName("name")[0].innerHTML = profile["Your Name"];

    /* Check for values in the Spreadsheet then populate the HTML with them */
    if (profile["Your Website"]) {
      contact.innerHTML += '<li><a href="' + profile["Your Website"] + '">' + profile["Your Website"].substr(7, profile["Your Website"].length) + '</a></li>';
    }
    if (profile["Your Email"]) {
      contact.innerHTML += '<li><a href="mailto:' + profile["Your Email"] + '">' + profile["Your Email"] + '</a></li>';
    }
    if (profile["Project Name"]) {
      contact.innerHTML += '<li>My project: <a href="' + "{{ site.baseurl }}project.html?pname=" + encodeURI(profile["Project Name"]) + '">' + profile["Project Name"] + '</a></li>';
    }
    if (profile["Your Statement"]) {
      document.getElementsByClassName("statement")[0].innerHTML += profile["Your Statement"];
    }

    /* Use the pattern file definitions to fetch the correct pattern and color variation for the given profile */
    var pattern = patternDir[profile["Pattern"]] + colorNames[profile["Top Color"]];
    /* Test the pattern... */
    document.body.innerHTML += "<div style='background: url(" + pattern + ".png)," + profile["Bottom Color"] + ";width:100vw;height:500px;'></div>";

    /* Use the given profile's color specifications to recolor certain elements */
    document.body.innerHTML += "<style>h1 { color:" + profile["Bottom Color"] + "; } h3, a, a:link, a:visited { color:" + profile["Top Color"] + "; } h1 { border-color:" + profile["Bottom Color"] + ";} a:focus { outline: .15em solid" + profile["Top Color"] + "; }</style>";
  }
</script>
<!--    Page Specific Styles    -->
<!-- MOVE TO HEAD IN PRODUCTION -->
<style>
  body header.row {
    margin-bottom: 3rem;
  }
  body header.row h1 {
    margin-bottom: 0;
  }
</style>